<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Alma — Copy & Open</title>
  <style>
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; margin: 24px; color:#111827; }
    .card { max-width: 740px; padding: 16px; border: 1px solid #e5e7eb; border-radius: 14px; background: #fafafa; }
    .btn { display:inline-block; padding:10px 14px; border-radius:10px; border:1px solid #111827; background:#111827; color:#fff; text-decoration:none; font-weight:700; cursor:pointer; }
    .btn.secondary { background:#fff; color:#111827; }
    #status { color:#475569; font-size: 14px; margin-top: 10px; }
    textarea { width:100%; min-height: 120px; border:1px solid #e5e7eb; border-radius: 10px; padding:10px; }
  </style>
</head>
<body>
  <div class="card">
    <h1>Alma — Copy & Open</h1>
    <p>This page tries to <strong>copy your greeting</strong> to the clipboard and then opens the official Alma Adams form <em>without</em> ZIP parameters.</p>
    <p><small>If auto-copy is blocked by your browser, use the manual buttons below.</small></p>

    <div id="status">Preparing…</div>

    <div id="manual" style="display:none; margin-top:10px;">
      <textarea id="ta" readonly></textarea>
      <div style="margin-top:8px; display:flex; gap:10px; flex-wrap:wrap;">
        <button class="btn" id="copyBtn">Copy</button>
        <a class="btn secondary" id="openBtn" href="https://adamsforms.house.gov/forms/writeyourrep/" rel="noopener">Open Alma Form</a>
      </div>
    </div>
  </div>

  <script>
    const almaURL = "https://adamsforms.house.gov/forms/writeyourrep/"; // no zip params
    const qs = new URLSearchParams(location.search);

    // ✅ Use backticks for multi-line message
    const defaultMsg = `Dear Representative,
I am writing to strongly urge you to co-sponsor HR 2356 and to encourage your Democrat and Republican colleagues to do the same.

As you know, Israel and its well-funded lobbying networks continue to push legislation that undermines our most fundamental rights, including the right to free speech and peaceful assembly. This includes efforts to criminalize or chill boycotts of Israeli companies and to dangerously redefine “antisemitism” to include legitimate criticism of a foreign government. This is particularly alarming given Israel’s ongoing atrocities in Gaza—atrocities made possible through U.S. weapons, intelligence, and political cover.

HR 2356 is a commonsense measure. The public has a right to know whether elected officials hold dual citizenship—especially with countries that receive billions in U.S. taxpayer dollars and wield disproportionate influence over our foreign and domestic policy. A simple walk through the halls of Congress reveals foreign flags, particularly Israel’s, hanging outside the offices of both Republicans and Democrats. That reality underscores the urgent need for transparency.

If anything, this bill should be expanded beyond Members of Congress to include senior federal officials such as cabinet members, department heads, and U.S. attorneys. Disclosure should also cover whether individuals have served in the military of a foreign state, whether active, reserve, or operational.

The American people deserve to know who their leaders are accountable to. Silence or neutrality in this moment only enables the erosion of our democratic rights and deepens U.S. complicity in war crimes abroad.

For these reasons, I strongly urge you to co-sponsor and vocally support HR 2356. Doing so would demonstrate a commitment to transparency, accountability, and the constitutional rights of the people you represent.

Thank you for your leadership and service.`;

    // Allow override via ?msg=... (URL-encoded)
    const msg = qs.get('msg') ? decodeURIComponent(qs.get('msg')) : defaultMsg;

    const status = (t) => { document.getElementById('status').textContent = t; };

    async function tryCopy(text) {
      try {
        if (navigator.clipboard && navigator.clipboard.writeText) {
          await navigator.clipboard.writeText(text);
          return true;
        }
      } catch (e) {}
      try {
        const ta = document.getElementById('ta');
        ta.value = text;
        ta.focus();
        ta.select();
        return document.execCommand('copy');
      } catch (e) {
        return false;
      }
    }

    async function run() {
      // Prepare manual UI
      document.getElementById('ta').value = msg;
      document.getElementById('openBtn').href = almaURL;

      const copied = await tryCopy(msg);
      if (copied) {
        status("Message copied. Redirecting…");
        setTimeout(() => { location.href = almaURL; }, 250);
      } else {
        status("Auto-copy blocked by the browser. Tap Copy, then Open Alma Form.");
        document.getElementById('manual').style.display = 'block';
      }
    }

    document.getElementById('copyBtn').onclick = async () => {
      const ok = await tryCopy(msg);
      status(ok ? "Copied. Now tap Open Alma Form." : "Copy failed. Long-press to select and copy.");
    };

    window.addEventListener('load', run, { once: true });
  </script>
</body>
</html>
